<html>
<head>
    <title>Test</title>
    <script>
        const options = {
            listeners: {
                onContextReady: ({helpers}) => {
                    console.log(helpers)
                    document.getElementById('change-me').innerText = "Loaded";
                    const btn1 = document.querySelector('#my-button')
                    helpers.onClick(btn1, ()=> {
                        helpers.track("test", {"test":1});
                        document.getElementById('change-me').innerText = "Changed";
                    })

                    const btn2 = document.querySelector('#consent-all')
                    helpers.onClick(btn2, ()=> {
                        helpers.track("consent", {
                            "id":"consent-type",
                            "granted": true,
                            'revoke': null
                        });
                        helpers.consentSubmitted()
                    })
                },
                onConsentRequired: () => {
                    const consentBox = document.getElementById('consentBox');
                    if (consentBox) {
                        consentBox.style.display = "block";
                    }
                }
            },
            tracker: {
                url: {
                    script: 'http://localhost:8001/tracker',
                    api: 'http://localhost:8001'
                },
                source: {
                    id: "8538394b-92da-4c82-99f8-9169ca7350a8"
                },
                init: {
                    mydata: "ddd"
                }
            }
        }

        !function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).tracardi=e()}(function(){return function n(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,s)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){var n=[["add","attach"],["remove","detach"]];function o(u){if("undefined"!=typeof window){var e=u?n:n.reverse(),f=e[0],l=e[1],d=f[0]+"EventListener";return function(e,t,r,n){if(!e)throw new Error("Element not found");var o="on"+t,i=n||!1;if(e[d]){function s(){return e[d](t,r,i)}return s(),function(){return e[l[0]+"EventListener"](t,r,i),s}}if(e[f[1]]){function a(){return e[f[1]](o,r)}return a(),function(){return e[l[1]](o,r),a}}function c(){return e[o]=u?r:null}return c(),function(){return e[o]=u?null:r,c}}}}var i=o(!0),s=o();r.addListener=i,r.removeListener=s},{}],2:[function(e,t,r){t.exports=e("./lib/axios")},{"./lib/axios":4}],3:[function(e,t,r){"use strict";var c=e("./../utils"),u=e("./../core/settle"),f=e("./../helpers/cookies"),l=e("./../helpers/buildURL"),d=e("../core/buildFullPath"),p=e("./../helpers/parseHeaders"),h=e("./../helpers/isURLSameOrigin"),m=e("../core/createError");t.exports=function(a){return new Promise(function(t,r){var n=a.data,o=a.headers;c.isFormData(n)&&delete o["Content-Type"];var e,i=new XMLHttpRequest;a.auth&&(e=a.auth.username||"",s=a.auth.password?unescape(encodeURIComponent(a.auth.password)):"",o.Authorization="Basic "+btoa(e+":"+s));var s=d(a.baseURL,a.url);if(i.open(a.method.toUpperCase(),l(s,a.params,a.paramsSerializer),!0),i.timeout=a.timeout,i.onreadystatechange=function(){var e;i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in i?p(i.getAllResponseHeaders()):null,e={data:a.responseType&&"text"!==a.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:e,config:a,request:i},u(t,r,e),i=null)},i.onabort=function(){i&&(r(m("Request aborted",a,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(m("Network Error",a,null,i)),i=null},i.ontimeout=function(){var e="timeout of "+a.timeout+"ms exceeded";a.timeoutErrorMessage&&(e=a.timeoutErrorMessage),r(m(e,a,"ECONNABORTED",i)),i=null},!c.isStandardBrowserEnv()||(s=(a.withCredentials||h(s))&&a.xsrfCookieName?f.read(a.xsrfCookieName):void 0)&&(o[a.xsrfHeaderName]=s),"setRequestHeader"in i&&c.forEach(o,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)}),c.isUndefined(a.withCredentials)||(i.withCredentials=!!a.withCredentials),a.responseType)try{i.responseType=a.responseType}catch(e){if("json"!==a.responseType)throw e}"function"==typeof a.onDownloadProgress&&i.addEventListener("progress",a.onDownloadProgress),"function"==typeof a.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then(function(e){i&&(i.abort(),r(e),i=null)}),i.send(n=n||null)})}},{"../core/buildFullPath":10,"../core/createError":11,"./../core/settle":15,"./../helpers/buildURL":19,"./../helpers/cookies":21,"./../helpers/isURLSameOrigin":24,"./../helpers/parseHeaders":26,"./../utils":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),o=e("./helpers/bind"),i=e("./core/Axios"),s=e("./core/mergeConfig");function a(e){var t=new i(e),e=o(i.prototype.request,t);return n.extend(e,i.prototype,t),n.extend(e,t),e}var c=a(e("./defaults"));c.Axios=i,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(e){return Promise.all(e)},c.spread=e("./helpers/spread"),c.isAxiosError=e("./helpers/isAxiosError"),t.exports=c,t.exports.default=c},{"./cancel/Cancel":5,"./cancel/CancelToken":6,"./cancel/isCancel":7,"./core/Axios":8,"./core/mergeConfig":14,"./defaults":17,"./helpers/bind":18,"./helpers/isAxiosError":23,"./helpers/spread":27,"./utils":28}],5:[function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},{}],6:[function(e,t,r){"use strict";var n=e("./Cancel");function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},{"./Cancel":5}],7:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],8:[function(e,t,r){"use strict";var n=e("./../utils"),o=e("../helpers/buildURL"),i=e("./InterceptorManager"),s=e("./dispatchRequest"),a=e("./mergeConfig");function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},c.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(r){c.prototype[r]=function(e,t){return this.request(a(t||{},{method:r,url:e,data:(t||{}).data}))}}),n.forEach(["post","put","patch"],function(n){c.prototype[n]=function(e,t,r){return this.request(a(r||{},{method:n,url:e,data:t}))}}),t.exports=c},{"../helpers/buildURL":19,"./../utils":28,"./InterceptorManager":9,"./dispatchRequest":12,"./mergeConfig":14}],9:[function(e,t,r){"use strict";var n=e("./../utils");function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},{"./../utils":28}],10:[function(e,t,r){"use strict";var n=e("../helpers/isAbsoluteURL"),o=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!n(t)?o(e,t):t}},{"../helpers/combineURLs":20,"../helpers/isAbsoluteURL":22}],11:[function(e,t,r){"use strict";var i=e("./enhanceError");t.exports=function(e,t,r,n,o){e=new Error(e);return i(e,t,r,n,o)}},{"./enhanceError":13}],12:[function(e,t,r){"use strict";var n=e("./../utils"),o=e("./transformData"),i=e("../cancel/isCancel"),s=e("../defaults");function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return a(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(a(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},{"../cancel/isCancel":7,"../defaults":17,"./../utils":28,"./transformData":16}],13:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},{}],14:[function(e,t,r){"use strict";var f=e("../utils");t.exports=function(t,r){r=r||{};var n={},e=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return f.isPlainObject(e)&&f.isPlainObject(t)?f.merge(e,t):f.isPlainObject(t)?f.merge({},t):f.isArray(t)?t.slice():t}function c(e){f.isUndefined(r[e])?f.isUndefined(t[e])||(n[e]=a(void 0,t[e])):n[e]=a(t[e],r[e])}f.forEach(e,function(e){f.isUndefined(r[e])||(n[e]=a(void 0,r[e]))}),f.forEach(o,c),f.forEach(i,function(e){f.isUndefined(r[e])?f.isUndefined(t[e])||(n[e]=a(void 0,t[e])):n[e]=a(void 0,r[e])}),f.forEach(s,function(e){e in r?n[e]=a(t[e],r[e]):e in t&&(n[e]=a(void 0,t[e]))});var u=e.concat(o).concat(i).concat(s),s=Object.keys(t).concat(Object.keys(r)).filter(function(e){return-1===u.indexOf(e)});return f.forEach(s,c),n}},{"../utils":28}],15:[function(e,t,r){"use strict";var o=e("./createError");t.exports=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},{"./createError":11}],16:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=function(t,r,e){return n.forEach(e,function(e){t=e(t,r)}),t}},{"./../utils":28}],17:[function(a,c,e){!function(s){!function(){"use strict";var r=a("./utils"),n=a("./helpers/normalizeHeaderName"),t={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var e,i={adapter:("undefined"!=typeof XMLHttpRequest?e=a("./adapters/xhr"):void 0!==s&&"[object process]"===Object.prototype.toString.call(s)&&(e=a("./adapters/http")),e),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){i.headers[e]={}}),r.forEach(["post","put","patch"],function(e){i.headers[e]=r.merge(t)}),c.exports=i}.call(this)}.call(this,a("_process"))},{"./adapters/http":3,"./adapters/xhr":3,"./helpers/normalizeHeaderName":25,"./utils":28,_process:29}],18:[function(e,t,r){"use strict";t.exports=function(r,n){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return r.apply(n,e)}}},{}],19:[function(e,t,r){"use strict";var o=e("./../utils");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,r){if(!t)return e;var n,r=r?r(t):o.isURLSearchParams(t)?t.toString():(n=[],o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),n.push(i(t)+"="+i(e))}))}),n.join("&"));return r&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r),e}},{"./../utils":28}],20:[function(e,t,r){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],21:[function(e,t,r){"use strict";var a=e("./../utils");t.exports=a.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),a.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),a.isString(n)&&s.push("path="+n),a.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":28}],22:[function(e,t,r){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],23:[function(e,t,r){"use strict";t.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},{}],24:[function(e,t,r){"use strict";var n,o,i,s=e("./../utils");function a(e){return o&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}t.exports=s.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n=a(window.location.href),function(e){e=s.isString(e)?a(e):e;return e.protocol===n.protocol&&e.host===n.host}):function(){return!0}},{"./../utils":28}],25:[function(e,t,r){"use strict";var o=e("../utils");t.exports=function(r,n){o.forEach(r,function(e,t){t!==n&&t.toUpperCase()===n.toUpperCase()&&(r[n]=e,delete r[t])})}},{"../utils":28}],26:[function(e,t,r){"use strict";var o=e("./../utils"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,r,n={};return e&&o.forEach(e.split("\n"),function(e){r=e.indexOf(":"),t=o.trim(e.substr(0,r)).toLowerCase(),r=o.trim(e.substr(r+1)),t&&(n[t]&&0<=i.indexOf(t)||(n[t]="set-cookie"===t?(n[t]||[]).concat([r]):n[t]?n[t]+", "+r:r))}),n}},{"./../utils":28}],27:[function(e,t,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},{}],28:[function(e,t,r){"use strict";var o=e("./helpers/bind"),n=Object.prototype.toString;function i(e){return"[object Array]"===n.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==n.call(e))return!1;e=Object.getPrototypeOf(e);return null===e||e===Object.prototype}function u(e){return"[object Function]"===n.call(e)}function f(e,t){if(null!=e)if(i(e="object"!=typeof e?[e]:e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}t.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function r(){var n={};function e(e,t){c(n[t])&&c(e)?n[t]=r(n[t],e):c(e)?n[t]=r({},e):i(e)?n[t]=e.slice():n[t]=e}for(var t=0,o=arguments.length;t<o;t++)f(arguments[t],e);return n},extend:function(r,e,n){return f(e,function(e,t){r[t]=n&&"function"==typeof e?o(e,n):e}),r},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return e=65279===e.charCodeAt(0)?e.slice(1):e}}},{"./helpers/bind":18}],29:[function(e,t,r){var n,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,u=[],f=!1,l=-1;function d(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!f){var e=a(d);f=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||f||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.request=void 0;var n,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("axios"),a=(n=o)&&n.__esModule?n:{default:n};r.request=function(e){var t=e.url,r=e.header,n=e.method,o=e.data,i=e.onSuccess;void 0===r&&(r={"Content-Type":"application/json"}),void 0===n&&(n="get");try{(0,a.default)({url:t,method:n,header:r,data:o}).then(function(e){void 0!==i&&i(e)}).catch(function(e){e.response&&"object"===s(e.response.data)?console.error("[Tracker] "+e.response.data.detail):console.error("[Tracker] "+e.message)})}catch(e){console.error("[Tracker] "+e.message)}}},{axios:2}],31:[function(e,t,r){"use strict";e("@analytics/listener-utils"),e("./api_call");!function(e){e=e||window;var r=[],n=!1,o=!1;function i(){if(!n){n=!0;for(var e=0;e<r.length;e++)r[e].fn.call(window,r[e].ctx);r=[]}}function s(){"complete"===document.readyState&&i()}e.documentReady=function(e,t){if("function"!=typeof e)throw new TypeError("callback for documentReady(fn) must be a function");n?setTimeout(function(){e(t)},1):(r.push({fn:e,ctx:t}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(i,1):o||(document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",i)),o=!0))}}(window),window.tracker||(window.tracker={}),function(){for(var r=[],n="tracker.min.js",e=["track","page","identify"],t=0;t<e.length;t++){var o=e[t];window.tracker[o]=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),r.push(e),window.tracker}}(o)}function i(){if(console.debug("[Tracker] Rerun callbacks."),window.tracardi.default.getState().plugins.tracardi.initialized)for(window.tracker=window.tracardi.default;0<r.length;){var e=r.shift(),t=e.shift();tracker[t]&&tracker[t].apply(tracker,e)}else console.error("[Tracardi] Callbacks stopped. Tracker not initialized.")}documentReady(function(){var e,t=document.createElement("script");t.type="text/javascript",t.async=!0,void 0!==options.tracker||void 0!==options.tracker.url||void 0!==options.tracker.url.script?(null!==options.tracker.url.script?options.tracker.url.script.startsWith("http")?t.src=options.tracker.url.script+"/"+n:t.src=options.tracker.url.script:t.src=n,console.debug("[Tracker] Loading: "+t.src),t.addEventListener?t.addEventListener("load",function(e){i()},!1):t.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||i(window.event)},(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e)):console.error("[Tracker] Undefined options.tracker.url.script. This url defines location of tracker code.")})}()},{"./api_call":30,"@analytics/listener-utils":1}]},{},[31])(31)});

    </script>
    <script>
        window.tracker.track("xxx1", {"a": 222, "aaa2":3})
        window.tracker.track("xxx2", {"a": 2})
        window.tracker.track("xxx3", {"a": 3})
    </script>
    <style>
        .consent {
            display: none; /* Hidden by default */
        }

        /* Modal Content/Box */
        .consent-content {
            box-sizing: border-box;
            position: absolute;
            bottom: 0;
            left: 0;
            background-color: #ccc;
            padding: 5px;
            width: 100%;
        }
    </style>

</head>
<body>
Test
<a href="page.html?referrer=aaa"><span id="change-me">Page</span></a>

<div id="consentBox" class="consent">
    <div class="consent-content">
        <p>Some text in the Modal..</p>
        <button id="consent-all">Allow all</button>
        <button id="my-button">bind</button>
    </div>
</div>

</body>
</html>